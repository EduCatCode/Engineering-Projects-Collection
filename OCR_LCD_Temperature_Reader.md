# OCR（光學字符辨識）技術應用於LCD溫度計數字辨識

## 技術概述
OCR（Optical Character Recognition）技術是一種專為文字和數字辨識而設計的工具，特別適用於結構化、清晰的數字或文字內容的提取。通常應用在車牌辨識，OCR工具能夠一次性提取整體內容，理論上無需額外切割圖像或自建模型。

|辨識正確|辨識錯誤|
|:-:|:-:|
|![螢幕擷取畫面 2024-11-25 153605](https://hackmd.io/_uploads/rk2nl2-mJe.png)|![螢幕擷取畫面 2024-11-25 153735](https://hackmd.io/_uploads/BJb6g2ZQJx.png)|


### 優勢
1. **無需自建模型**：直接使用現有的OCR工具即可完成數字辨識。
2. **流程簡單**：只需進行基礎的圖像預處理，即可直接預測完整的數字。
3. **成本低**：應用在樹苺派上不須IPC。


### 現有OCR工具
#### **Tesseract OCR**
   - 開源工具，適合靜態影像的文字辨識。
   - 支援多語言和數字辨識，但需要良好的圖像質量和適當的前處理。


### 標準實現流程
1. **圖片預處理**
   - 增強對比度。
   - 進行二值化處理，以減少雜訊。
2. **OCR辨識**
   - 使用OCR工具直接對整張圖片進行數字預測。

---

## 實驗記錄

### 1. 初始實驗：整張照片的OCR辨識
**輸入圖像**：未裁剪的整張照片。  
![LINE_ALBUM__241122_1](https://hackmd.io/_uploads/S1YHX3bQJl.jpg)
**辨識結果**：`4 \n 49`  
**問題分析**：  
- 證明OCR工具對於整張圖像的雜訊抗性不足。
- 需要進一步裁剪以聚焦溫度計的LCD部分。




---

### 2. 裁剪後進行辨識
**輸入圖像**：裁剪後僅保留LCD溫度計部分。  
![image](https://hackmd.io/_uploads/BJRj73bmye.png)
**辨識結果**：`['', '480\n48', '490\n490']`  
**問題分析**：  
- OCR工具對於LCD數字的辨識準確度提升有限。
- 存在額外的錯誤數字（如`480\n48`中多餘的`48`）。
- 可能原因：
  1. LCD字型與OCR模型的訓練字型有差異。
  2. 圖像角度或清晰度未達最佳條件。


---

### 3. 單個字符的切割與辨識
**輸入圖像**：將LCD數字進一步裁切為單字符。  
|4|7|0|
|:-:|:-:|:-:|
|![image](https://hackmd.io/_uploads/BJqkVhZmJx.png)|![image](https://hackmd.io/_uploads/Bkle42bQkx.png)|![image](https://hackmd.io/_uploads/H1rgN3bXJx.png)|


**辨識結果**：`['', '', '']`  
**問題分析**：  
- OCR工具無法正確識別單個字符。
- 可能原因：
  1. 單字符過小，導致OCR模型難以識別 (選擇是序列行辨識模式)。
  2. 缺乏與LCD數字匹配的訓練數據。

---

### 4. 嘗試不同的照片進行辨識
**輸入圖像**：更換不同角度與光線條件的LCD溫度計照片。  
![image](https://hackmd.io/_uploads/S1nLN3b71e.png)

**辨識結果**：`['460']`  
**問題分析**：  
- **顯示角度**和拍攝質量對辨識有顯著影響。

---

## 推論與結論

### 推論
1. **圖像角度影響**
   - 溫度計若非正面拍攝，LCD顯示的數字可能因變形或反光而導致辨識失敗。
2. **字型匹配度**
   - LCD數字通常以直角構成，與OCR工具訓練的常規字型（如手寫數字或有弧度的印刷字體）存在差異，導致辨識準確度降低。
3. **字符分割的影響**
   - 單字符切割可能因圖像過小或缺乏上下文信息而影響OCR準確性。

### 嘗試不同的方式
1. **進一步預處理**：
   - 嘗試對LCD數字部分進行膨脹或腐蝕操作，以突出數字特徵。
   - 校正圖像角度，使LCD正面對齊。
2. **自訓練模型**：
   - 收集LCD數字數據集，使用深度學習模型（如CRNN或自定義CNN模型）進行訓練，提升對LCD字型的辨識能力。
3. **多階段辨識**：
   - 先進行整體OCR辨識，再針對疑似錯誤部分進行局部處理或手動校正。

### 結論
現有OCR工具在處理LCD溫度計數字時，受到字型差異和圖像質量的限制，辨識準確度不穩定。通過改進圖像預處理與模型訓練，有望顯著提升辨識效果。

